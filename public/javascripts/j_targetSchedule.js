window.onload=async function(e){headlineInit();let t=new JHCalendar(document.getElementById("calendarDiv"),new Date,!0);await async function(){return new Promise(((e,t)=>requestFunction("GET","/todo-share/request/accept",{},"JSON",(function(n){if(n.status){let t=document.getElementById("sharedTodoSelect");if(0!==n.result.length){let e=document.createDocumentFragment();for(let t=0;t<n.result.length;t++){let o=document.createElement("option");o.innerText=n.result[t].TARGET_USER_ID,e.appendChild(o)}t.append(e)}e(!0)}else t(!0)}))))}();let n=document.getElementById("sharedTodoSelect"),o=null,l=n.options[n.selectedIndex].text;if(l){o=await async function(e){return new Promise(((t,n)=>requestFunction("GET","/todolist/target/daily?ID="+e+"&date="+(new Date).getTime(),null,"JSON",(function(e){if(e.status){let n=[];for(let t=0;t<e.result.length;t++){let o=e.result[t];n.push(new TODO_OBJECT(o._id,o.DATA,o.CREATED_DATE,o.DEAD_LINE,o.IS_DONE))}t(new TODO(n,document.getElementById("todoContainerDiv"),!0))}else n(new TODO([],document.getElementById("todoContainerDiv")))}))))}(l),t.daySelected=function(e){o.getDateTodo(e,!0,l)};let e=await async function(e,t){return new Promise(((n,o)=>{requestFunction("GET","/todolist/target/notification/monthly?ID="+e+"&date="+t.getTime(),{},"JSON",(function(e){if(e.status){let t=new Map;if(0!==e.result.length)for(let n=0;n<e.result.length;n++){let o=e.result[n],l=new Date(o.TARGET_DATE).getFullYear()+"-"+(new Date(o.TARGET_DATE).getMonth()+1)+"-"+new Date(o.TARGET_DATE).getDate();if(t.has(l)){let e=t.get(l);e.push(o.DATA),t.set(l,e)}else t.set(l,[o.DATA])}n(t)}else o(null)}))}))}(l,new Date);t.monthlyEvent=e,t.setPaintTarget()}document.getElementById("calendarViewTodoSpan").addEventListener("click",(function(e){document.querySelector(".todoCategory_span.active").classList.remove("active"),e.currentTarget.classList.add("active"),requestFunction("GET","/todolist/target/notification/daily?ID="+l+"&date="+t.seletedDate.getTime(),{},"JSON",(function(e){if(e.status){let t=[];for(let n=0;n<e.result.length;n++){let o=e.result[n];t.push(new TODO_OBJECT(o._id,o.DATA,o.CREATED_DATE,o.DEAD_LINE,o.IS_DONE))}o=new TODO(t,document.getElementById("todoContainerDiv"),!0,"NOTIFICATION")}}))})),document.getElementById("dailyTodoSpan").addEventListener("click",(function(e){document.querySelector(".todoCategory_span.active").classList.remove("active"),e.currentTarget.classList.add("active"),requestFunction("GET","/todolist/target/daily?ID="+l+"&date="+t.seletedDate.getTime(),{},"JSON",(function(e){if(e.status){let t=[];for(let n=0;n<e.result.length;n++){let o=e.result[n];t.push(new TODO_OBJECT(o._id,o.DATA,o.CREATED_DATE,o.DEAD_LINE,o.IS_DONE))}o=new TODO(t,document.getElementById("todoContainerDiv"),!0,"DAILY")}}))})),document.getElementById("weeklyTodoSpan").addEventListener("click",(function(e){document.querySelector(".todoCategory_span.active").classList.remove("active"),e.currentTarget.classList.add("active"),requestFunction("GET","/todolist/target/weekly?ID="+l+"&date="+t.seletedDate.getTime(),{},"JSON",(function(e){if(e.status){let t=[];for(let n=0;n<e.result.length;n++){let o=e.result[n];t.push(new TODO_OBJECT(o._id,o.DATA,o.CREATED_DATE,o.DEAD_LINE,o.IS_DONE))}o=new TODO(t,document.getElementById("todoContainerDiv"),!0,"WEEKLY")}}))})),document.getElementById("monthlyTodoSpan").addEventListener("click",(function(e){document.querySelector(".todoCategory_span.active").classList.remove("active"),e.currentTarget.classList.add("active"),requestFunction("GET","/todolist/target/monthly?ID="+l+"&date="+t.seletedDate.getTime(),{},"JSON",(function(e){if(e.status){let t=[];for(let n=0;n<e.result.length;n++){let o=e.result[n];t.push(new TODO_OBJECT(o._id,o.DATA,o.CREATED_DATE,o.DEAD_LINE,o.IS_DONE))}o=new TODO(t,document.getElementById("todoContainerDiv"),!0,"MONTHLY")}}))}))};