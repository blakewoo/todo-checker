window.onload=async function(e){headlineInit();let t=new JHCalendar(document.getElementById("calendarDiv"),new Date,!1),n=await async function(){return new Promise(((e,t)=>requestFunction("GET","/todolist/my/daily?date="+(new Date).getTime(),{},"JSON",(function(t){if(t.status){let n=[];for(let e=0;e<t.result.length;e++){let o=t.result[e];n.push(new TODO_OBJECT(o._id,o.DATA,o.CREATED_DATE,o.DEAD_LINE,o.IS_DONE))}e(new TODO(n,document.getElementById("todoContainerDiv"),!1,"DAILY"))}else e(new TODO([],document.getElementById("todoContainerDiv"),!1,"DAILY"))}))))}(),o=await l(new Date);async function l(e){return new Promise(((t,n)=>{requestFunction("GET","/todolist/my/notification/monthly?date="+e.getTime(),{},"JSON",(function(e){if(e.status){let n=new Map;if(0!==e.result.length)for(let t=0;t<e.result.length;t++){let o=e.result[t],l=new Date(o.TARGET_DATE).getFullYear()+"-"+(new Date(o.TARGET_DATE).getMonth()+1)+"-"+new Date(o.TARGET_DATE).getDate();if(n.has(l)){let e=n.get(l);e.push(o.DATA),n.set(l,e)}else n.set(l,[o.DATA])}t(n)}else n(null)}))}))}t.monthlyEvent=o,t.getRecentMonthlyNotification=l,t.daySelected=function(e){let t=document.querySelector(".todoCategory_span.active").getAttribute("id");n.getDateTodo(e,!1,null,t)},t.setPaintTarget(),document.getElementById("todoInputText").addEventListener("keyup",(function(e){if("Enter"===e.key){let o=e.currentTarget.value;if(""===o)return;let l=document.querySelector(".todoCategory_span.active").getAttribute("id");e.currentTarget.value="";let a=new TODO_OBJECT(null,o,t.seletedDate,null,!1);if(n.addTodo(a,t.seletedDate,l)&&"calendarViewTodoSpan"===l){let e=t.monthlyEvent,n=t.seletedDate,l=e.get(n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate());l?(l.push(o),e.set(n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),l)):e.set(n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),[o]),t.monthlyEvent=e,t.setPaintTarget()}}})),document.getElementById("calendarViewTodoSpan").addEventListener("click",(function(e){document.querySelector(".todoCategory_span.active").classList.remove("active"),e.currentTarget.classList.add("active"),requestFunction("GET","/todolist/my/notification/daily?date="+t.seletedDate.getTime(),{},"JSON",(function(e){if(e.status){let t=[];for(let n=0;n<e.result.length;n++){let o=e.result[n];t.push(new TODO_OBJECT(o._id,o.DATA,o.CREATED_DATE,o.DEAD_LINE,o.IS_DONE))}n=new TODO(t,document.getElementById("todoContainerDiv"),!1,"NOTIFICATION")}}))})),document.getElementById("dailyTodoSpan").addEventListener("click",(function(e){document.querySelector(".todoCategory_span.active").classList.remove("active"),e.currentTarget.classList.add("active"),requestFunction("GET","/todolist/my/daily?date="+t.seletedDate.getTime(),{},"JSON",(function(e){if(e.status){let t=[];for(let n=0;n<e.result.length;n++){let o=e.result[n];t.push(new TODO_OBJECT(o._id,o.DATA,o.CREATED_DATE,o.DEAD_LINE,o.IS_DONE))}n=new TODO(t,document.getElementById("todoContainerDiv"),!1,"DAILY")}}))})),document.getElementById("weeklyTodoSpan").addEventListener("click",(function(e){document.querySelector(".todoCategory_span.active").classList.remove("active"),e.currentTarget.classList.add("active"),requestFunction("GET","/todolist/my/weekly?date="+t.seletedDate.getTime(),{},"JSON",(function(e){if(e.status){let t=[];for(let n=0;n<e.result.length;n++){let o=e.result[n];t.push(new TODO_OBJECT(o._id,o.DATA,o.CREATED_DATE,o.DEAD_LINE,o.IS_DONE))}n=new TODO(t,document.getElementById("todoContainerDiv"),!1,"WEEKLY")}}))})),document.getElementById("monthlyTodoSpan").addEventListener("click",(function(e){document.querySelector(".todoCategory_span.active").classList.remove("active"),e.currentTarget.classList.add("active"),requestFunction("GET","/todolist/my/monthly?date="+t.seletedDate.getTime(),{},"JSON",(function(e){if(e.status){let t=[];for(let n=0;n<e.result.length;n++){let o=e.result[n];t.push(new TODO_OBJECT(o._id,o.DATA,o.CREATED_DATE,o.DEAD_LINE,o.IS_DONE))}n=new TODO(t,document.getElementById("todoContainerDiv"),!1,"MONTHLY")}}))}))};